<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mignon Rossouw Portfolio</title>

        <!-- Bootstrap CSS for responsive layout and components -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

        <!-- Font Awesome for icons -->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

        <!-- Bootstrap Icons for additional icon set -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

        <!-- Hackernoon Icons -->
        <link rel="stylesheet" href="./assets/hackernoon/iconfont.css">


        <!-- CSS -->
        <link rel="stylesheet" href="/assets/css/styles.css">

        <!-- Scripts -->

        <!-- Window Management Script -->
        <script src="./assets/js/window-management.js"></script>

        <!-- All Windows Script -->
        <script src="./assets/js/start-menu.js"></script>
        <script src=./assets/js/document-window.js"></script>
        <script src="./assets/js/browser-window.js"></script>
        <script src="./assets/js/music-window.js"></script>
        <script src="./assets/js/recycle-window.js"></script>
        <script src="./assets/js/notes-window.js"></script>
        <script src="./assets/js/computer-window.js"></script>
        <script src="./assets/js/volume.js"></script>
        <script src="./assets/js/shut-down.js"></script>
        <script src="./assets/js/precious.js"></script>
        <script src="./assets/js/sounds.js"></script>

        <script>
            // Connect to windows
            const originalOpenWindow = openWindow;
            openWindow = function(windowId) {
                originalOpenWindow(windowId);

                if (windowId === 'documents') {
                    loadDocumentsWindow();
                } else if (windowId === 'browser') {
                    loadBrowserWindow();
                } else if (windowId === 'music') {
                    loadMusicWindow();
                } else if (windowId === 'recycleBin') {
                    loadRecycleBinWindow();
                } else if (windowId === 'notepad') {
                    loadNotesWindow();
                } else if (windowId === 'myComputer') {
                    loadMyComputerWindow();
                } else if (windowId === 'precious') {
                    loadPreciousWindow();
                }
            };  
        </script>
    </head>
<body>

    <!-- ============================================================ -->
    <!-- Desktop Area -->
    <!-- ============================================================ -->
    <div class="desktop-container">
        <!-- Desktop Icons using Bootstrap Grid -->
        <div class="container-fluid h-100">
            <div class="row align-content-start">

                <!-- My Computer Icon -->
                <!-- ------------------ -->
                <div class="col-auto">
                    <div class="desktop-icon" onclick="openWindow('myComputer')">
                        <div class="icon-img">
                            <i class="hn hn-technology fs-1"></i>
                        </div>
                        <div class="icon-label">My Computer</div>
                    </div>
                </div>
                
                <!-- Documents Icon -->
                <!-- ------------------ -->
                <div class="col-auto">
                    <div class="desktop-icon" onclick="openWindow('documents')">
                        <div class="icon-img">
                           <i class="hn hn-folder-open-solid fs-1"></i>
                        </div>
                        <div class="icon-label">Documents</div>
                    </div>
                </div>
                
                <!-- Browser Icon -->
                <!-- ------------------ -->
                <div class="col-auto">
                    <div class="desktop-icon" onclick="openWindow('browser')">
                        <div class="icon-img">
                            <i class="hn hn-web3 fs-1"></i>
                        </div>
                        <div class="icon-label">Meowser</div>
                    </div>
                </div>
                
                <!-- Notepad Icon -->
                <!-- ------------------ -->
                <div class="col-auto">
                    <div class="desktop-icon" onclick="openWindow('notepad')">
                        <div class="icon-img">
                            <i class="hn hn-writing fs-1"></i>
                        </div>
                        <div class="icon-label">Notes</div>
                    </div>
                </div>

                <!-- Precious Icon -->
                <!-- ------------------ -->
                <div class="col-auto">
                    <div class="desktop-icon" onclick="openWindow('precious')">
                        <div class="icon-img">
                            <i class="hn hn-image-solid fs-1"></i>
                        </div>
                        <div class="icon-label">precious.png</div>
                    </div>
                </div>
                
                <!-- Games Icon -->
                <!-- ------------------ -->
                <div class="col-auto">
                    <div class="desktop-icon" onclick="openWindow('games')">
                        <div class="icon-img">
                            <i class="hn hn-gaming fs-1"></i>
                        </div>
                        <div class="icon-label">Pounce</div>
                    </div>
                </div>
                
                <!-- Music Icon -->
                <!-- ------------------ -->
                <div class="col-auto">
                    <div class="desktop-icon" onclick="openWindow('music')">
                        <div class="icon-img fs-4">
                            <i class="hn hn-music-solid fs-1"></i>
                        </div>
                        <div class="icon-label">Spotify</div>
                    </div>
                </div>

                <!-- Recycle Bin Icon -->
                <!-- ------------------ -->
                <div class="col-auto">
                    <div class="desktop-icon" onclick="openWindow('recycleBin')">
                        <div class="icon-img">
                            <i class="hn hn-trash-alt-solid fs-1"></i>
                        </div>
                        <div class="icon-label">Recycle Bin</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ============================================================ -->
        <!-- Windows -->
        <!-- ============================================================ -->
        
        <!-- My Computer Window -->
        <!-- ------------------ -->
        <div id="myComputer" class="window shadow">
            <div class="window-header d-flex justify-content-between align-items-center px-2 py-2 fs-6">
                    <!-- LEFT SIDE: icon + title -->
                    <div class="d-flex align-items-center gap-2">
                        <i class="hn hn-technology"></i>
                        <span class="fw-6">My Computer</span>
                    </div>

                    <!-- RIGHT SIDE: window controls -->
                    <div class="window-controls d-flex gap-2">
                        <button class="btn btn-sm" onclick="minimizeWindow('myComputer')">_</button>
                        <button class="btn btn-sm" onclick="closeWindow('myComputer')">x</button>
                    </div>
                </div>
            <div class="window-body p-3 cursor-default">
                <!-- Content will be loaded here -->
            </div>
        </div>
        
        <!-- Documents Window -->
        <!-- ------------------ -->
        <div id="documents" class="window shadow">
            <div class="window-header d-flex justify-content-between align-items-center px-2 py-2 fs-6">

                <!-- LEFT: icon + title -->
                <div class="d-flex align-items-center gap-2">
                    <i class="hn hn-folder-open-solid"></i>
                    <span class="fw-6">Documents</span>
                </div>

                <!-- RIGHT: window controls -->
                <div class="window-controls d-flex gap-2">
                    <button class="btn btn-sm" onclick="minimizeWindow('documents')">_</button>
                    <button class="btn btn-sm" onclick="closeWindow('documents')">x</button>
                </div>
            </div>

            <div class="window-body p-2 cursor-default">
                <!-- Content will be loaded here -->
            </div>
        </div>

        <!-- Browser Window -->
        <!-- ------------------ -->
        <div id="browser" class="window shadow">
            <div class="window-header d-flex justify-content-between align-items-center px-2 py-2 fs-6">
                <div class="d-flex align-items-center gap-2">
                    <i class="hn hn-web3"></i>
                    <span class="fw-6">Meowser</span>
                </div>
                <div class="window-controls d-flex gap-2">
                    <button class="btn btn-sm" onclick="minimizeWindow('browser')">_</button>
                    <button class="btn btn-sm" onclick="closeWindow('browser')">x</button>
                </div>
            </div>
            <div class="window-body">
                <!-- Content will be loaded here -->
            </div>
        </div>

        <!-- Notes / Notepad Window -->
        <!-- ------------------ -->
        <div id="notepad" class="window shadow">
            <div class="window-header d-flex justify-content-between align-items-center px-2 py-2 fs-6">

                <!-- LEFT: icon + title -->
                <div class="d-flex align-items-center gap-2">
                    <i class="hn hn-writing"></i>
                    <span class="fw-6">Notepad</span>
                </div>

                <!-- RIGHT: window controls -->
                <div class="window-controls d-flex gap-2">
                    <button class="btn btn-sm" onclick="minimizeWindow('notepad')">_</button>
                    <button class="btn btn-sm" onclick="closeWindow('notepad')">x</button>
                </div>
            </div>

            <div class="window-body p-3 cursor-default">
                <!-- Content will be loaded here -->
            </div>
        </div>

        <!-- Precious Image Window -->
        <!-- ------------------ -->
        <div id="precious" class="window shadow">
            <div class="window-header d-flex justify-content-between align-items-center px-2 py-2 fs-6">

                <!-- LEFT: icon + title -->
                <div class="d-flex align-items-center gap-2">
                    <i class="hn hn-image-solid"></i>
                    <span class="fw-6">precious.png</span>
                </div>

                <!-- RIGHT: window controls -->
                <div class="window-controls d-flex gap-2">
                    <button class="btn btn-sm" onclick="minimizeWindow('precious')">_</button>
                    <button class="btn btn-sm" onclick="closeWindow('precious')">x</button>
                </div>
            </div>

            <div class="window-body">
                <!-- Content will be loaded here -->
            </div>
        </div>

        <!-- Pounce Game Window -->
        <!-- ------------------ -->
        <div id="games" class="window shadow">
            <div class="window-header d-flex justify-content-between align-items-center px-2 py-2 fs-6">

                <!-- LEFT: icon + title -->
                <div class="d-flex align-items-center gap-2">
                    <i class="hn hn-gaming"></i>
                    <span class="fw-6">Pounce</span>
                </div>

                <!-- RIGHT: window controls -->
                <div class="window-controls d-flex gap-2">
                    <button class="btn btn-sm" onclick="minimizeWindow('games')">_</button>
                    <button class="btn btn-sm" onclick="closeWindow('games')">x</button>
                </div>
            </div>

            <div class="window-body p-3 cursor-default">
                <!-- Content will be loaded here -->
            </div>
        </div>

        <!-- Music Window -->
        <!-- ------------------ -->
        <div id="music" class="window shadow">
            <div class="window-header d-flex justify-content-between align-items-center px-2 py-2 fs-6">

                <!-- LEFT: icon + title -->
                <div class="d-flex align-items-center gap-2">
                    <i class="hn hn-music-solid"></i>
                    <span class="fw-6">Spotify</span>
                </div>

                <!-- RIGHT: window controls -->
                <div class="window-controls d-flex gap-2">
                    <button class="btn btn-sm" onclick="minimizeWindow('music')">_</button>
                    <button class="btn btn-sm" onclick="closeWindow('music')">x</button>
                </div>
            </div>

            <div class="window-body p-3 cursor-default">
                <!-- Content will be loaded here -->
            </div>
        </div>
        
        <!-- Recycle Bin Window -->
        <!-- ------------------ -->
        <div id="recycleBin" class="window shadow">
            <div class="window-header d-flex justify-content-between align-items-center px-2 py-2 fs-6">

                <!-- LEFT: icon + title -->
                <div class="d-flex align-items-center gap-2">
                    <i class="hn hn-trash-alt-solid"></i>
                    <span class="fw-6">Recycle Bin</span>
                </div>

                <!-- RIGHT: window controls -->
                <div class="window-controls d-flex gap-2">
                    <button class="btn btn-sm" onclick="minimizeWindow('recycleBin')">_</button>
                    <button class="btn btn-sm" onclick="closeWindow('recycleBin')">x</button>
                </div>
            </div>
            <div class="window-body p-3 cursor-default">
                <!-- Document icons will be loaded here dynamically -->
            </div>
        </div>

        
        <!-- Start Menu -->
        <div id="startMenu" class="start-menu">
            <div class="start-menu-header p-2 fs-5">
                Mignon Rossouw
            </div>
            <div>
                <div class="start-menu-item p-2" onclick="openWindow('myComputer'); toggleStartMenu();">
                    <i class="hn hn-technology"></i>
                    <span class="ms-4">My Computer</span>
                </div>
                <div class="start-menu-item p-2" onclick="openWindow('documents'); toggleStartMenu();">
                    <i class="hn hn-folder-open-solid"></i>
                    <span class="ms-4">Documents</span>
                </div>
                <div class="start-menu-item p-2" onclick="openWindow('notepad'); toggleStartMenu();">
                    <i class="hn hn-writing"></i>
                    <span class="ms-4">Notepad</span>
                </div>
                <div class="start-menu-item p-2" onclick="openWindow('browser'); toggleStartMenu();">
                    <i class="hn hn-web3"></i>
                    <span class="ms-4">Web Browser</span>
                </div>
                <div class="start-menu-item p-2" onclick="openWindow('games'); toggleStartMenu();">
                    <i class="hn hn-gaming"></i>
                    <span class="ms-4">Games</span>
                </div>
                <div class="start-menu-item p-2" onclick="openWindow('music'); toggleStartMenu();">
                    <i class="hn hn-music-solid"></i>
                    <span class="ms-4">Music Player</span>
                </div>
                <div class="start-menu-item p-2" onclick="openWindow('settings'); toggleStartMenu();">
                    <i class="hn hn-cog-solid"></i>
                    <span class="ms-4">Settings</span>
                </div>
                <div class="start-menu-item p-2" onclick="shutdown(); toggleStartMenu();">
                    <i class="hn hn-moon-solid"></i>
                    <span class="ms-4">Shut Down</span>
                </div>
            </div>
        </div>

    </div> <!-- Closing div for desktop-container -->


    <!-- Taskbar -->
    <div class="taskbar d-flex align-items-center">
        <div class="start-button px-4 py-1" onclick="toggleStartMenu()">
            Start
        </div>
        <div class="d-flex flex-grow-1 ms-3 px-4 py-1" id="taskbarItems" >
            <!-- Taskbar items will be added here when windows are opened -->
        </div>
        <div class="system-tray cursor-pointer">
            <i class="hn hn-sound-on-solid me-3 cursor-pointer fs-5"></i>
            <span id="clock" class="cursor-default fs-6"></span>
        </div>

        <!-- Stars container -->
        <div class="taskbar-stars">
            <div class="star s1"></div>
            <div class="star s2"></div>
            <div class="star s3"></div>
            <div class="star s4"></div>
            <div class="star s5"></div>
            <div class="star s6"></div>
            <div class="star s7"></div>
            <div class="star s8"></div>

            <div class="tiny t1"></div>
            <div class="tiny t2"></div>
            <div class="tiny t3"></div>
            <div class="tiny t4"></div>
            <div class="tiny t5"></div>
            <div class="tiny t6"></div>
            <div class="tiny t7"></div>
            <div class="tiny t8"></div>

            <div class="fairy f1"></div>
            <div class="fairy f2"></div>
            <div class="fairy f3"></div>
            <div class="fairy f4"></div>
            <div class="fairy f5"></div>
            <div class="fairy f6"></div>
            <div class="fairy f7"></div>
        </div>
    </div>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Font Awesome -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js"></script>

    <!-- Sounds -->

    <script>
console.log("=== SOUND SYSTEM INIT ===");

// 1. Create the sound system FIRST
const clickSound = new Audio('/assets/sounds/click.wav');
clickSound.volume = 0.3;

function playClickSound() {
    console.log("Playing click sound");
    clickSound.currentTime = 0;
    clickSound.play().catch(() => {
        // Silent fail - audio will work after user interaction
    });
}

// 2. Store references to ALL your original functions BEFORE they get overridden
const originalFunctions = {
    openWindow: window.openWindow,
    closeWindow: window.closeWindow,
    minimizeWindow: window.minimizeWindow,
    toggleStartMenu: window.toggleStartMenu,
    shutdown: window.shutdown,
    loadBrowserWindow: window.loadBrowserWindow,
    loadDocumentsWindow: window.loadDocumentsWindow,
    loadMusicWindow: window.loadMusicWindow,
    loadRecycleBinWindow: window.loadRecycleBinWindow,
    loadNotesWindow: window.loadNotesWindow,
    loadMyComputerWindow: window.loadMyComputerWindow,
    loadPreciousWindow: window.loadPreciousWindow
};

console.log("Original functions captured:", Object.keys(originalFunctions));

// 3. Create new wrapped functions that play sound first
window.openWindow = function(windowId) {
    console.log("openWindow wrapped with sound:", windowId);
    playClickSound();
    if (originalFunctions.openWindow) {
        return originalFunctions.openWindow(windowId);
    }
};

window.closeWindow = function(windowId) {
    console.log("closeWindow wrapped with sound:", windowId);
    playClickSound();
    if (originalFunctions.closeWindow) {
        return originalFunctions.closeWindow(windowId);
    }
};

window.minimizeWindow = function(windowId) {
    console.log("minimizeWindow wrapped with sound:", windowId);
    playClickSound();
    if (originalFunctions.minimizeWindow) {
        return originalFunctions.minimizeWindow(windowId);
    }
};

window.toggleStartMenu = function() {
    console.log("toggleStartMenu wrapped with sound");
    playClickSound();
    if (originalFunctions.toggleStartMenu) {
        return originalFunctions.toggleStartMenu();
    }
};

window.shutdown = function() {
    console.log("shutdown wrapped with sound");
    playClickSound();
    if (originalFunctions.shutdown) {
        return originalFunctions.shutdown();
    }
};

// 4. Wait for DOM and fix ALL click handlers
document.addEventListener('DOMContentLoaded', function() {
    console.log("=== SETTING UP CLICK HANDLERS ===");
    
    // Fix desktop icons
    const icons = document.querySelectorAll('.desktop-icon');
    console.log(`Found ${icons.length} desktop icons`);
    
    icons.forEach(icon => {
        // Get the original onclick
        const originalOnClick = icon.getAttribute('onclick');
        if (originalOnClick) {
            console.log("Desktop icon original onclick:", originalOnClick);
            
            // Extract the windowId from the onclick string
            const match = originalOnClick.match(/openWindow\('([^']+)'\)/);
            if (match) {
                const windowId = match[1];
                console.log(`Extracted windowId: ${windowId}`);
                
                // Remove the onclick attribute
                icon.removeAttribute('onclick');
                
                // Add new click listener
                icon.addEventListener('click', function(e) {
                    console.log(`Icon clicked: ${windowId}`);
                    playClickSound();
                    window.openWindow(windowId);
                });
            }
        }
    });
    
    // Fix window control buttons (minimize/close)
    document.addEventListener('click', function(e) {
        // Check if click is on a window control button
        if (e.target.tagName === 'BUTTON') {
            const btn = e.target;
            const btnText = btn.textContent.trim();
            
            // Check if it's a minimize button (_)
            if (btnText === '_') {
                const windowElement = btn.closest('.window');
                if (windowElement) {
                    const windowId = windowElement.id;
                    console.log("Minimize button clicked for window:", windowId);
                    e.stopPropagation(); // Prevent sound from playing twice
                    playClickSound();
                    window.minimizeWindow(windowId);
                }
            }
            // Check if it's a close button (x)
            else if (btnText === 'x') {
                const windowElement = btn.closest('.window');
                if (windowElement) {
                    const windowId = windowElement.id;
                    console.log("Close button clicked for window:", windowId);
                    e.stopPropagation(); // Prevent sound from playing twice
                    playClickSound();
                    window.closeWindow(windowId);
                }
            }
        }
    });
    
    // Fix start button
    const startButton = document.querySelector('.start-button');
    if (startButton) {
        startButton.removeAttribute('onclick');
        startButton.addEventListener('click', function() {
            console.log("Start button clicked");
            playClickSound();
            window.toggleStartMenu();
        });
    }
    
    // Fix start menu items
    const startMenuItems = document.querySelectorAll('.start-menu-item');
    console.log(`Found ${startMenuItems.length} start menu items`);
    
    startMenuItems.forEach(item => {
        const originalOnClick = item.getAttribute('onclick');
        if (originalOnClick) {
            console.log("Start menu item original onclick:", originalOnClick);
            
            // Parse the onclick to get windowId and toggle
            const parts = originalOnClick.split(';');
            let windowId = null;
            let hasToggle = false;
            
            for (const part of parts) {
                const openMatch = part.match(/openWindow\('([^']+)'\)/);
                if (openMatch) {
                    windowId = openMatch[1];
                }
                if (part.includes('toggleStartMenu()')) {
                    hasToggle = true;
                }
            }
            
            if (windowId) {
                console.log(`Start menu item windowId: ${windowId}, hasToggle: ${hasToggle}`);
                
                // Remove onclick
                item.removeAttribute('onclick');
                
                // Add new click listener
                item.addEventListener('click', function() {
                    console.log(`Start menu item clicked: ${windowId}`);
                    playClickSound();
                    window.openWindow(windowId);
                    if (hasToggle) {
                        window.toggleStartMenu();
                    }
                });
            }
        }
    });
    
    // Add sound to regular buttons (that aren't window controls)
    document.querySelectorAll('button:not([onclick*="Window"])').forEach(button => {
        if (!button._hasSound) {
            button.addEventListener('click', function(e) {
                // Don't play sound for window controls (they're handled above)
                const btnText = this.textContent.trim();
                if (btnText !== '_' && btnText !== 'x') {
                    console.log("Regular button clicked:", this.textContent);
                    playClickSound();
                }
            });
            button._hasSound = true;
        }
    });
    
    console.log("=== SOUND SYSTEM READY ===");
});

// 5. Make functions globally available
window.playClickSound = playClickSound;
window.originalFunctions = originalFunctions;

console.log("Sound system initialized");
</script>

    </body>

    <script src="./assets/js/clock.js"></script>
</html>
